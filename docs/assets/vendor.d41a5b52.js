var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(e,n,i)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,a=(t,a)=>{for(var l in a||(a={}))n.call(a,l)&&o(t,l,a[l]);if(e)for(var l of e(a))i.call(a,l)&&o(t,l,a[l]);return t};class l{constructor(t,e){this.x=t,this.y=e}clone(){return new l(this.x,this.y)}add(t){return new l(this.x+t.x,this.y+t.y)}multiply(t){return new l(this.x*t,this.y*t)}dot(t){return this.x*t.x+this.y*t.y}dist(t){return Math.sqrt((this.x-t.x)**2+(this.y-t.y)**2)}}const r=l;function c(){return{width:window.innerWidth,height:window.innerHeight}}function s(t){return{width:t.clientWidth||t.width,height:t.clientHeight||t.height}}function d(t,e,n,i){const o=i||window.devicePixelRatio||1;let a=e||s(t).width,l=n||s(t).height;t.width=a*o,t.height=l*o,t.style.width=a+"px",t.style.height=l+"px",1!=o&&t.getContext("2d").setTransform(o,0,0,o,0,0)}var u,h,f;new l(0,0),new l(1,1),(h=u||(u={}))[h.KeyboardPressed=0]="KeyboardPressed",h[h.KeyboardDown=1]="KeyboardDown",h[h.Mouse=2]="Mouse",h[h.Window=3]="Window",h[h.Custom=4]="Custom",h[h.All=5]="All",(f=function(){function t(t){return i.appendChild(t.dom),t}function e(t){for(var e=0;e<i.children.length;e++)i.children[e].style.display=e===t?"block":"none";n=t}var n=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",(function(t){t.preventDefault(),e(++n%i.children.length)}),!1);var o=(performance||Date).now(),a=o,l=0,r=t(new f.Panel("FPS","#0ff","#002")),c=t(new f.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var s=t(new f.Panel("MB","#f08","#201"));return e(0),{REVISION:16,dom:i,addPanel:t,showPanel:e,begin:function(){o=(performance||Date).now()},end:function(){l++;var t=(performance||Date).now();if(c.update(t-o,200),t>a+1e3&&(r.update(1e3*l/(t-a),100),a=t,l=0,s)){var e=performance.memory;s.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){o=this.end()},domElement:i,setMode:e}}).Panel=function(t,e,n){var i=1/0,o=0,a=Math.round,l=a(window.devicePixelRatio||1),r=80*l,c=48*l,s=3*l,d=2*l,u=3*l,h=15*l,f=74*l,p=30*l,m=document.createElement("canvas");m.width=r,m.height=c,m.style.cssText="width:80px;height:48px";var y=m.getContext("2d");return y.font="bold "+9*l+"px Helvetica,Arial,sans-serif",y.textBaseline="top",y.fillStyle=n,y.fillRect(0,0,r,c),y.fillStyle=e,y.fillText(t,s,d),y.fillRect(u,h,f,p),y.fillStyle=n,y.globalAlpha=.9,y.fillRect(u,h,f,p),{dom:m,update:function(c,g){i=Math.min(i,c),o=Math.max(o,c),y.fillStyle=n,y.globalAlpha=1,y.fillRect(0,0,r,h),y.fillStyle=e,y.fillText(a(c)+" "+t+" ("+a(i)+"-"+a(o)+")",s,d),y.drawImage(m,u+l,h,f-l,p,u,h,f-l,p),y.fillRect(u+f-l,h,l,p),y.fillStyle=n,y.globalAlpha=.9,y.fillRect(u+f-l,h,l,a((1-c/g)*p))}}},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};class p extends Error{constructor(t,e){super(e?`[${e.capitalize()}] - ${t}`:t),this.name="EngineFailure"}}class m extends p{constructor(t){super(t,"renderer")}}const y={strokeStyle:"black",lineWidth:2,lineJoin:"round",lineCap:"round",fillStyle:"transparent",globalAlpha:1,globalCompositeOperation:"add"},g={font:"Roboto",size:16,color:"black"},w=2*Math.PI;let x,b,v=null==self.document&&null==self.window?4:2*(window.devicePixelRatio||1);function S(t){return~~(t*v)/v}class C{static create(t,e){let[n,i]=[c().width,c().height];const o=function(t,e,n,i){const o=document.createElement("canvas");return d(o,t,e,n),i&&(o.oncontextmenu=t=>t.preventDefault()),o}(t||n,e||i);return function(t,e){window.addEventListener("DOMContentLoaded",(()=>{var n;const i=null!=(n=document.querySelector(e))?n:document.createElement(e);i.appendChild(t),document.querySelector("body").appendChild(i)}))}(o,"main"),C.setContext(o.getContext("2d")),o}static createFromCanvas(t){let e=document.querySelector(t);if(!(e&&e instanceof HTMLCanvasElement))throw new m("The selected element is not a canvas");return d(e),C.setContext(e.getContext("2d")),e}static setContext(t){x=t}static getContext(){return x}static style(t){if(!x)throw new m("Context has not been initialize. Please use Renderer.setContext");const e=a(a({},y),t);if(e!==b){for(let t in e)x[t]!==e[t]&&(x[t]=e[t]);b=e}}static clear(t){t?(C.style({fillStyle:t}),x.fillRect(0,0,x.canvas.width,x.canvas.height)):x.clearRect(0,0,x.canvas.width,x.canvas.height)}static line(t,e,n,i,o){C.style(o),x.beginPath(),x.moveTo(S(t),S(e)),x.lineTo(S(n),S(i)),x.stroke()}static rect(t,e,n,i,o){C.style(o);const[a,l,r,c]=[S(t),S(e),S(n),S(i)];x.fillRect(a,l,r,c),x.strokeRect(a,l,r,c)}static rectFromCenter(t,e,n,i,o){return C.rect(t-n/2,e-i/2,n,i,o)}static rectFromPoints(t,e,n,i,o){return C.rect(t,e,n-t,i-e,o)}static poly(t,e){if(t.length){C.style(e),x.beginPath(),x.moveTo(S(t[0].x),S(t[0].y));for(let e=1;e<t.length;e++)x.lineTo(S(t[e].x),S(t[e].y));x.stroke()}}static circle(t,e,n,i){C.style(i),x.beginPath(),x.arc(S(t),S(e),n,0,w),x.fill(),x.stroke()}static circleFromRect(t,e,n,i,o){return C.circle(t+n/2,e+i/2,Math.min(n,i)/2,o)}static point(t,e,n){C.circle(t,e,5,n)}static rectSprite(t,e,n,i,o){C.style({}),x.save(),x.translate(S(t+n/2),S(e+i/2)),x.scale(o.scale.x,o.scale.y),x.rotate(o.rotation),x.drawImage(o.image,S(n*o.offset.x-n/2),S(i*o.offset.y-i/2),S(n),S(i)),x.restore()}static circleSprite(t,e,n,i){x.save(),x.beginPath(),x.arc(S(t),S(e),n,0,w),x.clip(),C.rectSprite(t-n,e-n,2*n,2*n,i),x.restore()}static text(t,e,n,i){if(x){let t=a(a({},g),i);x.font=`${t.size}px ${t.font}`,C.style({fillStyle:t.color})}x.fillText(t,e,n)}static tint(t,e,n,i,o){C.rect(e,n,i,o,{fillStyle:t,globalCompositeOperation:"multiply",globalAlpha:.25})}static beginFrame(t){C.clear(t)}static endFrame(){}}let P=[],E=4;const k=["top-left","top-right","bottom-left","bottom-right","custom"];class R{static addItem(t,e,n){R.internalAddItem(t,e,n)}static addButton(t,e,n,i){R.internalAddItem(t,n,i,e)}static internalAddItem(t,e,n,i){const o={callback:t,position:e,options:n,onClick:i};P.push(o);const a=P.length;window.addEventListener("load",(()=>R.addToDom(o,a)))}static init(){R.addStyle('*,\n*::after,\n*::before {\n    box-sizing: border-box;\n}\n\nbody {\n    margin: 0;\n    font-family: "Roboto";\n    font-weight: 400;\n    width: 100vw;\n    height: 100vh;\n    overflow: hidden;\n}\n\ncanvas {\n    z-index: 10;\n}\n\n.ue-interface {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    display: flex;\n    padding: 0.5em;\n    z-index: 10;\n    /* Make the click event pass through */\n    pointer-events: none;\n}\n\n.ue-container>div {\n    position: absolute;\n    display: flex;\n    flex-flow: column nowrap;\n}\n\n.ue-container>.top-left {\n    top: 0;\n    left: 0;\n}\n\n.ue-container>.top-right {\n    top: 0;\n    right: 0;\n    text-align: right;\n}\n\n.ue-container>.bottom-left {\n    bottom: 0;\n    left: 0;\n}\n\n.ue-container>.bottom-right {\n    bottom: 0;\n    right: 0;\n    text-align: right;\n}\n\n.ue-interface-items {\n    padding: .1em;\n}\n\n.ue-interface-button {\n    cursor: pointer;\n    user-select: none;\n}');const t=document.createElement("div");t.classList.add("ue-interface","ue-container");for(let e of k){const n=document.createElement("div");n.classList.add(e),t.appendChild(n)}document.body.appendChild(t)}static addStyle(t){const e=document.createElement("style");e.textContent=t,document.head.append(e)}static addToDom(t,e){var n,i;const o=t.callback(),a=document.createElement("span");a.classList.add("ue-interface-items"),a.id=`item-${e}`,a.innerText=o,Object.entries(t.options||{}).forEach((([t,e])=>a.style[t]=e)),t.position?null==(n=document.querySelector(`.ue-container > .${t.position}`))||n.appendChild(a):null==(i=document.querySelector(".ue-container > .custom"))||i.appendChild(a),t.onClick&&(a.addEventListener("click",(e=>t.onClick(e))),a.classList.add("ue-interface-button"))}static update(){P.forEach(((t,e)=>{const n=t.callback(),i=document.querySelector(`.ue-interface #item-${e+1}`);i&&i.innerText!==n&&(i.innerText=n)}))}static statsShift(t){const e=document.querySelector(".top-left");e&&(e.style.top=`${t}px`)}static setUpdateInterval(t){E=t}static get updateInterval(){return E}}export{C as B,r as h,R as l,c as y};
